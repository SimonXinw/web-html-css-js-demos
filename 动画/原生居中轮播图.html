<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>原生Swiper实现</title>
    <style>
      body {
        background: #f6f7fb;
        margin: 0;
        padding: 40px 0;
      }
      .swiper-outer {
        width: 100%;
        overflow: hidden;
        position: relative;
      }
      .swiper-inner {
        display: flex;
        transition: transform 0.4s ease;
        will-change: transform;
        /* 避免图片拖动选中 */
        user-select: none;
      }
      .swiper-card {
        flex: 0 0 80%; /* 卡片宽度为80% */
        margin: 0 12px; /* 卡片间距 */
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
        position: relative;
        background: #fff;
        transition: box-shadow 0.4s;
        cursor: pointer;
        /* 动画平滑尺寸缩放 */
        transition: box-shadow 0.4s, transform 0.4s, opacity 0.4s;
      }
      .swiper-card img {
        width: 100%;
        display: block;
        aspect-ratio: 16 / 9;
        object-fit: cover;
      }
      /* 默认缩小（未激活） */
      .swiper-card:not(.active) {
        transform: scale(1);
        opacity: 0.7;
        z-index: 0;
      }
      .swiper-card.active {
        box-shadow: 0 6px 30px rgba(32, 46, 84, 0.15);
        transform: scale(1);
        opacity: 1;
        z-index: 2;
      }
      /* 按钮样式 */
      .swiper-btn {
        position: absolute;
        top: 50%;
        width: 46px;
        height: 46px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.09);
        border: none;
        cursor: pointer;
        font-size: 26px;
        color: #607d8b;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        opacity: 0.94;
        transition: background 0.18s;
        user-select: none;
      }
      .swiper-btn:active {
        background: #f0f4f9;
      }
      .swiper-btn.prev {
        left: 10px;
      }
      .swiper-btn.next {
        right: 10px;
      }
      /* 禁用按钮 */
      .swiper-btn[disabled] {
        opacity: 0.38;
        pointer-events: none;
      }
      @media (max-width: 600px) {
        .swiper-outer {
          max-width: none;
        }
        .swiper-card {
          border-radius: 11px;
        }
        .swiper-btn {
          width: 36px;
          height: 36px;
          font-size: 18px;
        }
      }
    </style>
  </head>
  <body>
    <div class="swiper-outer">
      <button class="swiper-btn prev" id="btn-prev">&#8592;</button>
      <button class="swiper-btn next" id="btn-next">&#8594;</button>
      <div class="swiper-inner" id="swiper-inner">
        <!-- 动态插图 -->
      </div>
    </div>
    <script>
      // 配置
      const IMAGE_URL =
        "https://cdn.shopify.com/s/files/1/0668/4970/2037/files/7963f26f86ef9f2535dfdcdf80b6c86f_076b03d2-e416-4b6d-b5f1-b958ac026614.webp?v=1748148616";
      const IMG_COUNT = 6;
      // 卡片设定百分比
      const CARD_WIDTH_PERCENT = 80; // 卡片宽百分比
      const CARD_MARGIN = 12; // px，为效果一致，和CSS保持一致
      // 渲染卡片
      const swiperInner = document.getElementById("swiper-inner");

      for (let i = 0; i < IMG_COUNT; i++) {
        const div = document.createElement("div");
        div.className = "swiper-card";
        div.innerHTML = `<img src="${IMAGE_URL}" alt="轮播图${i + 1}">`;
        swiperInner.appendChild(div);
      }

      // 激活卡片
      let activeIndex = 0;

      function updateSwiper() {
        const cards = swiperInner.children;
        for (let i = 0; i < cards.length; i++) {
          if (i === activeIndex) cards[i].classList.add("active");
          else cards[i].classList.remove("active");
        }
        // 计算每张总宽度 = 卡片宽 + 2*margin
        const outer = document.querySelector(".swiper-outer");

        const containerW = outer.clientWidth;

        const cardW = (containerW * CARD_WIDTH_PERCENT) / 100;

        const fullCardW = cardW + 2 * CARD_MARGIN;
        // 移动到激活卡片居中

        // 平移量 = 激活卡片中心位置 - 容器中心
        const translateX = fullCardW * activeIndex - (containerW - cardW) / 2;

        swiperInner.style.transform = `translateX(${-translateX}px)`;
        // 按钮显隐
        document.getElementById("btn-prev").disabled = activeIndex === 0;
        document.getElementById("btn-next").disabled =
          activeIndex === IMG_COUNT - 1;
      }

      // 事件
      document.getElementById("btn-prev").addEventListener("click", () => {
        if (activeIndex > 0) {
          activeIndex--;
          updateSwiper();
        }
      });
      document.getElementById("btn-next").addEventListener("click", () => {
        if (activeIndex < IMG_COUNT - 1) {
          activeIndex++;
          updateSwiper();
        }
      });
      // 响应式窗口
      window.addEventListener("resize", updateSwiper);
      // 卡片点击
      swiperInner.addEventListener("click", (e) => {
        const cardEls = Array.from(swiperInner.children);
        const idx = cardEls.indexOf(e.target.closest(".swiper-card"));
        if (idx >= 0 && idx !== activeIndex) {
          activeIndex = idx;
          updateSwiper();
        }
      });
      // 初始化
      updateSwiper();
    </script>
  </body>
</html>
