<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dyson Style SVG Path Animation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .section {
            height: 100vh;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .title {
            font-size: 24px;
            font-weight: 300;
            margin-bottom: 40px;
            opacity: 0.8;
            letter-spacing: 1px;
        }

        .svg-container {
            width: 600px;
            height: 400px;
            /* border: 1px solid #ddd; */
        }

        /* SVG 样式 */
        svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        /* 静态轮廓 - 浅灰色 */
        .path-bg {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* 动态描边 - 品牌色 (如 Dyson 的品红或紫色/蓝色) */
        .path-anim {
            fill: none;
            stroke: #F20C98; /* Dyson Pink/Purpleish */
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            /* 关键：dasharray 将由 JS 设置 */
            stroke-dasharray: 0 0; 
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 1.5s ease-out; /* CSS transition */
        }

        /* 气流粒子 */
        .airflow-particle {
            fill: #0077FF;
            opacity: 0;
        }

    </style>
</head>
<body>

    <div class="section">
        <p>向下滚动查看气流路径演示</p>
    </div>

    <div class="section" id="animSection">
        <div class="title">Air Multiplier™ Technology</div>
        <div class="svg-container">
            <svg viewBox="0 0 600 400">
                <!-- 模拟一个风扇/气流的抽象路径 -->
                <!-- 底部进气 -> 环形加速 -> 向前喷射 -->
                
                <!-- 路径定义 -->
                <defs>
                    <path id="airflowPath" d="M 300 380 L 300 250 C 300 250 200 250 200 150 C 200 50 400 50 400 150 C 400 250 300 250 300 250 L 300 200" />
                </defs>

                <!-- 背景轨迹 -->
                <path class="path-bg" d="M 300 380 L 300 250 C 300 250 200 250 200 150 C 200 50 400 50 400 150 C 400 250 300 250 300 250 L 300 200" />
                
                <!-- 动画轨迹 -->
                <path id="animPath" class="path-anim" d="M 300 380 L 300 250 C 300 250 200 250 200 150 C 200 50 400 50 400 150 C 400 250 300 250 300 250 L 300 200" />
                
                <!-- 箭头装饰 (可选) -->
                <circle cx="300" cy="380" r="4" fill="#ccc" />
            </svg>
        </div>
    </div>

    <div class="section">
        <p>精准气流控制</p>
    </div>

    <script>
        const path = document.getElementById('animPath');
        const section = document.getElementById('animSection');
        
        // 获取路径总长度
        const length = path.getTotalLength();
        
        // 初始化：设置 dasharray 为长度，offset 也为长度（隐藏）
        path.style.strokeDasharray = length;
        path.style.strokeDashoffset = length;

        // 使用 Intersection Observer 监听进入视口
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // 进入视口：offset 归零（显示路径）
                    // 稍微延迟一点，让用户站定再播放
                    setTimeout(() => {
                        path.style.strokeDashoffset = '0';
                    }, 200);
                } else {
                    // 离开视口：重置（可选，方便重复观看）
                    path.style.strokeDashoffset = length;
                }
            });
        }, {
            threshold: 0.5 // 元素显示 50% 时触发
        });

        observer.observe(section);
        
        // 可选：滚动驱动 (Scroll-driven)
        // 如果想让线条跟随滚动条生长，可以用下面的逻辑替换上面的 Observer
        /*
        window.addEventListener('scroll', () => {
            const rect = section.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            
            // 计算 section 在视口中的进度
            // start: rect.top = windowHeight
            // end: rect.bottom = 0
            
            let progress = 1 - (rect.top / (windowHeight - 200)); 
            
            // 限制 0-1
            if (progress < 0) progress = 0;
            if (progress > 1) progress = 1;
            
            path.style.strokeDashoffset = length * (1 - progress);
        });
        */
    </script>
</body>
</html>
