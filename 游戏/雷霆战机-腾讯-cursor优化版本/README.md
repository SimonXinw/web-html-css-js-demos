# 雷霆战机游戏优化

## 优化内容

### 1. 代码结构优化
- **模块化设计**：将原来的单一文件拆分为多个独立的JS模块
  - `Background.js` - 背景类
  - `Player.js` - 玩家类
  - `Enemy.js` - 敌机类
  - `Bullet.js` - 子弹类
  - `Explosion.js` - 爆炸效果类
  - `PowerUp.js` - 道具类
  - `InputHandler.js` - 输入处理类
  - `UI.js` - 用户界面类
  - `Game.js` - 游戏主类

### 2. 逻辑问题修复
- **修复碰撞检测bug**：原代码在循环中删除数组元素会导致索引错乱，现在使用倒序遍历避免此问题
- **优化敌机生成逻辑**：根据分数和等级动态调整敌机类型和生成频率
- **改进子弹碰撞检测**：使用更安全的循环方式处理碰撞检测
- **添加无敌状态**：玩家被击中后短暂无敌，避免连续受伤

### 3. 新增功能
- **暂停功能**：按ESC键或P键可以暂停/恢复游戏
- **等级系统**：根据分数自动升级，武器威力随等级提升
- **更多道具类型**：
  - 护盾道具（蓝色）
  - 武器升级道具（红色）
  - 生命恢复道具（绿色）
  - 炸弹道具（紫色）- 清除屏幕上所有敌机
- **升级提示**：升级时显示提示信息
- **生命值颜色变化**：根据剩余生命值改变颜色

### 4. 视觉效果优化
- **背景优化**：添加视差滚动效果和星星闪烁
- **玩家飞机**：
  - 引擎粒子效果
  - 护盾动画效果
  - 无敌状态闪烁
- **敌机优化**：
  - 多种移动模式（直线、之字形、圆形、波浪形）
  - 受伤闪烁效果
  - 生命值条显示
- **子弹优化**：
  - 子弹轨迹效果
  - 不同类型子弹的独特外观
  - 高能子弹的波动效果
- **爆炸效果**：
  - 更丰富的粒子效果
  - 径向渐变爆炸
  - 爆炸光芒效果
- **道具优化**：
  - 旋转和脉冲动画
  - 光晕效果
  - 不同类型道具的独特图标

### 5. 游戏平衡性优化
- **难度曲线**：随着分数增加，敌机生成更频繁，类型更丰富
- **道具平衡**：调整道具生成频率和类型分布
- **武器升级**：武器等级与游戏等级关联，最高4级
- **生命系统**：最大生命值限制为5，炸弹道具提供额外保护

### 6. 用户体验优化
- **UI改进**：
  - 分数动画效果
  - 生命值颜色变化
  - 等级显示
  - 升级提示消息
- **输入优化**：
  - 防止默认键盘行为
  - 防止右键菜单
  - 防止页面滚动
- **游戏状态管理**：
  - 开始界面
  - 暂停界面
  - 游戏结束界面
  - 状态切换逻辑

### 7. 性能优化
- **对象管理**：优化对象创建和销毁逻辑
- **渲染优化**：减少不必要的绘制操作
- **内存管理**：及时清理无效对象

## 使用方法

1. 打开 `index.html` 文件
2. 点击"开始游戏"按钮
3. 使用方向键或WASD移动飞机
4. 按空格键发射子弹
5. 收集道具升级武器和获得护盾
6. 按ESC键或P键暂停游戏

## 游戏特色

- **丰富的视觉效果**：粒子效果、动画、渐变等
- **多种敌机类型**：不同大小、生命值、移动模式
- **道具系统**：护盾、武器升级、生命恢复、炸弹
- **等级系统**：随分数自动升级，武器威力提升
- **暂停功能**：随时可以暂停游戏
- **响应式设计**：适配不同屏幕尺寸

## 技术特点

- **面向对象设计**：每个游戏对象都是独立的类
- **模块化架构**：便于维护和扩展
- **事件驱动**：基于事件的状态管理
- **Canvas渲染**：高性能的2D图形渲染
- **动画系统**：流畅的动画效果 