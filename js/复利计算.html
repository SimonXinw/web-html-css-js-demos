<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>复利计算</title>
    <link rel="stylesheet" href="./reset.css" />
    <style>
      input {
        width: 180px;
        height: 30px;
        box-sizing: border-box;
        padding-left: 8px;
        border-radius: 4px;
        border: 1px solid skyblue;
      }
      p {
        margin: 10px 0;
      }
      .form-label {
        display: inline-block;
        width: 120px;
        margin-right: 16px;
      }
      .page {
        width: 100%;
        height: 100%;
        background-color: #eee;
        overflow: hidden;
      }
      .box {
        width: 375px;
        margin: 18px auto;
      }
      .title {
        padding: 10px;
        font-weight: 900;
        text-align: center;
      }
      .arr-text {
        border: 0;
      }
      .annualized-yield-text {
        width: 500px;
        height: 30px;
        color: red;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="box">
        <p class="title">复利计算器</p>
        <p>
          <span class="form-label"> 当前总金额:</span
          ><input
            class="input-current-amount"
            type="text"
            placeholder="请输入当前总金额 ..."
          />
        </p>
        <p>
          <span class="form-label">过去总金额:</span
          ><input
            type="text"
            class="input-past-amount"
            placeholder="请输入过去总金额 ..."
          />
        </p>
        <p>
          <span class="form-label">年份:</span
          ><input class="input-year" type="text" placeholder="请输入年份 ..." />
          <button class="caculate-btn">计算</button>
        </p>
        <p>
          <span class="form-label">平均年化收益率:</span
          ><span class="annualized-yield-text">xx.xx%</span>
        </p>
      </div>
    </div>

    <script>
      var arrText = "";
      var newArrText = "";
      // 快捷取 DOM
      function $(name) {
        return document.querySelector(name);
      }
      // 测试算法时间
      function testCostTime(fn) {
        var startTime = new Date().getTime();
        fn();
        var endTime = new Date().getTime();
        var costTime = endTime - startTime;
        $(".annualized-yield-text").innerText = costTime + "%";
      }

      // 获取各个金额计算
      $(".caculate-btn").onclick = () => {
        var currentAmount = parseInt($(".input-current-amount").value);
        var pastAmount = parseInt($(".input-past-amount").value);
        var year = parseInt($(".input-year").value);
        var rate = 1;
        var totalNum = pastAmount;

        while (totalNum < currentAmount) {
          rate = rate + 0.01;
          totalNum = pastAmount;
          for (let i = 0; i < year; i++) {
            totalNum = parseInt(totalNum * rate);
          }
        }

        console.log(
          "当前金额：",
          currentAmount,
          "过去金额：",
          pastAmount,
          "年份：",
          year,
          "收益率：",
          rate
        );

        $(".annualized-yield-text").innerText = rate.toFixed(2).slice(-2) + "%";
      };
    </script>
  </body>
</html>
