<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>31练习_评分效果</title>
  <style>
    #ul {
      padding: 0;
      margin: 0;
      list-style: none;
      display: inline-block;
      vertical-align: middle;
      height: 30px;
    }

    #div {
      display: inline-block;
      vertical-align: middle;
      margin-left: 10px;
      font-size: 16px;
      color: #333;
    }

    #ul li {
      float: left;
      width: 30px;
      height: 30px;
      margin-right: 5px;
      cursor: pointer;
      font-size: 24px;
      color: #ddd;
      text-align: center;
      line-height: 30px;
      transition: color 0.2s ease;
    }

    #ul li:before {
      content: "★";
    }

    #ul li.active {
      color: #ffd700;
    }

    #ul li:hover {
      transform: scale(1.1);
    }
  </style>
</head>

<body>
  <ul id="ul">
    <li data-index="0"></li>
    <li data-index="1"></li>
    <li data-index="2"></li>
    <li data-index="3"></li>
    <li data-index="4"></li>
  </ul>
  <div id="div"></div>
</body>
<script>
  var oLis = document.querySelectorAll('#ul li');
  var oDiv = document.querySelector('#div');
  var list = ['很差', '差', '一般', '好', '很好'];
  var oUl = document.querySelector('#ul');

  var clickedRating = -1; // 记录点击固定的评分

  // 清除所有星星的active状态
  function clearAllStars() {
    for (var i = 0; i < oLis.length; i++) {
      oLis[i].classList.remove('active');
    }
  }

  // 点亮指定数量的星星
  function lightUpStars(count) {
    clearAllStars();
    for (var i = 0; i <= count; i++) {
      oLis[i].classList.add('active');
    }
  }

  // 显示已点击的评分
  function showClickedRating() {
    if (clickedRating >= 0) {
      lightUpStars(clickedRating);
    } else {
      clearAllStars();
    }
  }

  // 为每个星星绑定事件
  for (var i = 0; i < oLis.length; i++) {
    oLis[i].index = i;

    // 鼠标移入星星
    oLis[i].onmouseenter = function () {
      lightUpStars(this.index);
      oDiv.innerText = list[this.index];
    }

    // 鼠标点击星星
    oLis[i].onclick = function () {
      clickedRating = this.index;
      lightUpStars(clickedRating);
      oDiv.innerText = list[clickedRating];
    }
  }

  // 鼠标离开整个星星容器时，显示已点击的评分
  oUl.onmouseleave = function () {
    if (clickedRating >= 0) {
      showClickedRating();
      oDiv.innerText = list[clickedRating];
    } else {
      clearAllStars();
      oDiv.innerText = '';
    }
  }
</script>

</html>