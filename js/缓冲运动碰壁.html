<!DOCTYPE html>
<html lang="e1n">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      div {
        width: 100px;
        height: 100px;
        background-color: red;
        position: absolute;
      }
    </style>
    <script src="./js功能库/utils.js"></script>
  </head>
  <body>
    <div></div>

    <script>
      function begin(config) {
        let { speedX = 10, speedY = 10, timesX = 50, timesY = 50 } = config;

        //  时刻判断
        const timer = setInterval(() => {
          var div = document.querySelector("div");

          var maxY = document.documentElement.scrollHeight - div.offsetHeight;

          var maxX = document.documentElement.scrollWidth - div.offsetWidth;

          var x = div.offsetLeft;

          var y = div.offsetTop;

          //   左边距 右边距 决定初始速度方向
          if (speedX > 0) {
            speedX = (maxX - x) / timesX;
          } else {
            speedX = -x / timesX;
          }

          if (speedX > 0) {
            speedX = Math.ceil(speedX);
          } else {
            speedX = Math.floor(speedX);
          }

          // 判断边距，重新决定速度
          if (x <= 0) {
            div.style.backgroundColor = randomColor();

            speedX = maxX / 10;
          } else if (x >= maxX) {
            div.style.backgroundColor = randomColor();

            speedX = -x / 10;
          }

          //   上边距 下边距
          if (speedY > 0) {
            speedY = (maxY - y) / timesY;
          } else {
            speedY = -y / timesY;
          }

          if (speedY > 0) {
            speedY = Math.ceil(speedY);
          } else {
            speedY = Math.floor(speedY);
          }

          // 判断边距，重新决定速度
          if (y <= 0) {
            div.style.backgroundColor = randomColor();

            speedY = maxY / 10;
          } else if (y >= maxY) {
            div.style.backgroundColor = randomColor();
            console.log(">>>>>");

            speedY = -y / 10;
          }

          //  赋值 最终应该是多少的距离，位置
          div.style.left = x + speedX + "px";
          div.style.top = y + speedY + "px";
        }, 10);
      }

      // 启动
      begin({
        speedX: 10,
        speedY: 10,
        timesX: 100,
        timesY: 50,
      });
    </script>
  </body>
</html>
