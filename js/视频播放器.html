<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é«˜çº§è§†é¢‘æ’­æ”¾å™¨ - è¾›æœ›çš„è½®å­ç©ºé—´</title>
  <style>
    :root {
      --primary-color: #667eea;
      --secondary-color: #764ba2;
      --accent-color: #74b9ff;
      --text-color: #2c3e50;
      --bg-color: #f8f9fa;
      --card-bg: rgba(255, 255, 255, 0.95);
      --border-radius: 12px;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: var(--text-color);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header h1 {
      color: white;
      font-size: 2.2rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .header p {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
    }

    .video-player {
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
      margin-bottom: 15px;
    }

    .video-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
    }

    #videoPlayer {
      width: 100%;
      height: 450px;
      display: block;
      outline: none;
      object-fit: contain;
    }

    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .video-overlay.show {
      opacity: 1;
    }

    .play-button {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: var(--primary-color);
      cursor: pointer;
      transition: var(--transition);
    }

    .play-button:hover {
      background: white;
      transform: scale(1.1);
    }

    .controls-panel {
      padding: 15px 20px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .control-group {
      margin-bottom: 15px;
    }

    .control-group:last-child {
      margin-bottom: 0;
    }

    .control-group h3 {
      font-size: 1rem;
      margin-bottom: 8px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .control-group h3::before {
      content: '';
      width: 4px;
      height: 16px;
      background: var(--accent-color);
      border-radius: 2px;
    }

    .control-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn {
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(5px);
      white-space: nowrap;
    }

    .btn:hover {
      background: linear-gradient(135deg, var(--accent-color), #0984e3);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(116, 185, 255, 0.35);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn.primary {
      background: linear-gradient(135deg, var(--accent-color), #0984e3);
      color: white;
    }

    .btn.primary:hover {
      background: linear-gradient(135deg, #0984e3, #0769c4);
    }

    .volume-control,
    .speed-control {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
    }

    .slider {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: rgba(0, 0, 0, 0.1);
      outline: none;
      cursor: pointer;
      -webkit-appearance: none;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent-color);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent-color);
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .value-display {
      min-width: 50px;
      text-align: center;
      font-weight: 500;
      color: var(--text-color);
    }

    .progress-container {
      margin: 12px 20px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: rgba(0, 0, 0, 0.1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-color), #0984e3);
      border-radius: 4px;
      transition: width 0.1s ease;
    }

    .time-display {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: var(--text-color);
      margin-top: 8px;
    }

    .video-info {
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 15px;
      margin-top: 15px;
    }

    .video-info h3 {
      margin-bottom: 15px;
      color: var(--text-color);
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .info-label {
      font-weight: 500;
      color: var(--text-color);
    }

    .info-value {
      color: var(--accent-color);
      font-weight: 600;
    }

    .keyboard-shortcuts {
      margin-top: 15px;
      padding: 12px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
    }

    .keyboard-shortcuts h4 {
      margin-bottom: 10px;
      color: var(--text-color);
    }

    .shortcuts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 8px;
      font-size: 0.85rem;
    }

    .shortcut-item {
      display: flex;
      justify-content: space-between;
    }

    .shortcut-key {
      background: rgba(0, 0, 0, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
      font-weight: bold;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .container {
        max-width: 100%;
      }

      .header {
        margin-bottom: 15px;
      }

      .header h1 {
        font-size: 1.8rem;
      }

      .video-container {
        max-width: 100%;
      }

      #videoPlayer {
        height: 300px;
      }

      .controls-panel {
        padding: 12px 15px;
        max-width: 100%;
      }

      .control-group {
        margin-bottom: 12px;
      }

      .control-buttons {
        gap: 6px;
      }

      .btn {
        padding: 5px 10px;
        font-size: 0.8rem;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .shortcuts-grid {
        grid-template-columns: 1fr;
      }

      .progress-container {
        margin: 10px 15px;
        max-width: 100%;
      }
    }

    @media (max-width: 480px) {
      .header h1 {
        font-size: 1.4rem;
      }

      #videoPlayer {
        height: 250px;
      }

      .controls-panel {
        padding: 10px 12px;
      }

      .btn {
        padding: 4px 8px;
        font-size: 0.75rem;
      }

      .control-group h3 {
        font-size: 0.9rem;
        margin-bottom: 6px;
      }

      .control-buttons {
        gap: 4px;
      }
    }

    /* ä¸»è¦å†…å®¹åŒºåŸŸå¸ƒå±€ */
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* å¤§å±å¹•ä¸Šçš„æ°´å¹³å¸ƒå±€ */
    @media (min-width: 1024px) {
      .main-content {
        flex-direction: row;
        align-items: flex-start;
        gap: 20px;
      }

      .video-section {
        flex: 0 0 800px;
      }

      .controls-section {
        flex: 1;
        min-width: 350px;
      }

      .controls-panel {
        padding: 20px;
        max-width: none;
        margin: 0;
      }
    }

    /* åŠ è½½åŠ¨ç”» */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--accent-color);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* é€šçŸ¥æ ·å¼ */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transform: translateX(120%);
      transition: var(--transition);
      z-index: 1000;
    }

    .notification.show {
      transform: translateX(0);
    }

    .notification.success {
      border-left: 4px solid #00b894;
    }

    .notification.error {
      border-left: 4px solid #e17055;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <header class="header">
      <h1>ğŸ¬ é«˜çº§è§†é¢‘æ’­æ”¾å™¨</h1>
      <p>åŠŸèƒ½ä¸°å¯Œçš„HTML5è§†é¢‘æ’­æ”¾å™¨ï¼Œæ”¯æŒå¤šç§æ§åˆ¶æ–¹å¼å’Œå¿«æ·é”®æ“ä½œ</p>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
      <!-- è§†é¢‘éƒ¨åˆ† -->
      <div class="video-section">
        <main class="video-player">
          <div class="video-container">
            <video id="videoPlayer" src="../videos/å·¥ä½œçš„ä¸€å¤©.mp4" preload="metadata" crossorigin="anonymous"
              aria-label="ä¸»è§†é¢‘æ’­æ”¾å™¨">
              æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
            </video>
            <div class="video-overlay" id="videoOverlay">
              <div class="play-button" id="playButton" aria-label="æ’­æ”¾è§†é¢‘">â–¶</div>
            </div>
          </div>

          <!-- è¿›åº¦æ¡ -->
          <div class="progress-container">
            <div class="progress-bar" id="progressBar" aria-label="è§†é¢‘è¿›åº¦æ¡">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="time-display">
              <span id="currentTime">00:00</span>
              <span id="duration">00:00</span>
            </div>
          </div>
        </main>
      </div>

      <!-- æ§åˆ¶é¢æ¿éƒ¨åˆ† -->
      <div class="controls-section">
        <div class="video-player">
          <div class="controls-panel">
        <!-- åŸºç¡€æ’­æ”¾æ§åˆ¶ -->
        <div class="control-group">
          <h3>ğŸ® åŸºç¡€æ§åˆ¶</h3>
          <div class="control-buttons">
            <button class="btn primary" onclick="togglePlay()" aria-label="æ’­æ”¾/æš‚åœ">
              <span id="playPauseText">æ’­æ”¾</span>
            </button>
            <button class="btn" onclick="stopVideo()" aria-label="åœæ­¢æ’­æ”¾">åœæ­¢</button>
            <button class="btn" onclick="replayVideo()" aria-label="é‡æ–°æ’­æ”¾">é‡æ’­</button>
            <button class="btn" onclick="seekVideo(-10)" aria-label="åé€€10ç§’">âª 10s</button>
            <button class="btn" onclick="seekVideo(10)" aria-label="å¿«è¿›10ç§’">â© 10s</button>
            <button class="btn" onclick="seekVideo(-30)" aria-label="åé€€30ç§’">âª 30s</button>
            <button class="btn" onclick="seekVideo(30)" aria-label="å¿«è¿›30ç§’">â© 30s</button>
          </div>
        </div>

        <!-- æ’­æ”¾é€Ÿåº¦æ§åˆ¶ -->
        <div class="control-group">
          <h3>âš¡ æ’­æ”¾é€Ÿåº¦</h3>
          <div class="control-buttons">
            <button class="btn" onclick="setPlaybackRate(0.25)" aria-label="0.25å€é€Ÿ">0.25x</button>
            <button class="btn" onclick="setPlaybackRate(0.5)" aria-label="0.5å€é€Ÿ">0.5x</button>
            <button class="btn" onclick="setPlaybackRate(0.75)" aria-label="0.75å€é€Ÿ">0.75x</button>
            <button class="btn" onclick="setPlaybackRate(1)" aria-label="æ­£å¸¸é€Ÿåº¦">1x</button>
            <button class="btn" onclick="setPlaybackRate(1.25)" aria-label="1.25å€é€Ÿ">1.25x</button>
            <button class="btn" onclick="setPlaybackRate(1.5)" aria-label="1.5å€é€Ÿ">1.5x</button>
            <button class="btn" onclick="setPlaybackRate(2)" aria-label="2å€é€Ÿ">2x</button>
          </div>
          <div class="speed-control">
            <label for="speedSlider">è‡ªå®šä¹‰é€Ÿåº¦:</label>
            <div class="slider-container">
              <input type="range" id="speedSlider" class="slider" min="0.25" max="3" step="0.25" value="1"
                oninput="setPlaybackRate(this.value)" aria-label="æ’­æ”¾é€Ÿåº¦æ»‘å—">
              <span class="value-display" id="speedValue">1.0x</span>
            </div>
          </div>
        </div>

        <!-- éŸ³é‡æ§åˆ¶ -->
        <div class="control-group">
          <h3>ğŸ”Š éŸ³é‡æ§åˆ¶</h3>
          <div class="control-buttons">
            <button class="btn" onclick="adjustVolume(-0.1)" aria-label="é™ä½éŸ³é‡">ğŸ”‰ -</button>
            <button class="btn" onclick="adjustVolume(0.1)" aria-label="æé«˜éŸ³é‡">ğŸ”Š +</button>
            <button class="btn" onclick="toggleMute()" aria-label="é™éŸ³/å–æ¶ˆé™éŸ³">
              <span id="muteText">ğŸ”‡ é™éŸ³</span>
            </button>
          </div>
          <div class="volume-control">
            <label for="volumeSlider">éŸ³é‡:</label>
            <div class="slider-container">
              <span>ğŸ”‰</span>
              <input type="range" id="volumeSlider" class="slider" min="0" max="1" step="0.1" value="1"
                oninput="setVolume(this.value)" aria-label="éŸ³é‡æ»‘å—">
              <span>ğŸ”Š</span>
              <span class="value-display" id="volumeValue">100%</span>
            </div>
          </div>
        </div>

        <!-- å…¨å±æ§åˆ¶ -->
        <div class="control-group">
          <h3>ğŸ–¥ï¸ æ˜¾ç¤ºæ§åˆ¶</h3>
          <div class="control-buttons">
            <button class="btn" onclick="toggleFullscreen()" aria-label="åˆ‡æ¢å…¨å±">ğŸ”² å…¨å±</button>
            <button class="btn" onclick="requestPictureInPicture()" aria-label="ç”»ä¸­ç”»æ¨¡å¼">ğŸ“º ç”»ä¸­ç”»</button>
            <button class="btn" onclick="rotateScreen('portrait')" aria-label="ç«–å±æ¨¡å¼">ğŸ“± ç«–å±</button>
            <button class="btn" onclick="rotateScreen('landscape')" aria-label="æ¨ªå±æ¨¡å¼">ğŸ’» æ¨ªå±</button>
          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <!-- è§†é¢‘ä¿¡æ¯ -->
    <section class="video-info">
      <h3>ğŸ“Š è§†é¢‘ä¿¡æ¯</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">æ–‡ä»¶å:</span>
          <span class="info-value" id="fileName">å·¥ä½œçš„ä¸€å¤©.mp4</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ—¶é•¿:</span>
          <span class="info-value" id="videoDuration">--:--</span>
        </div>
        <div class="info-item">
          <span class="info-label">åˆ†è¾¨ç‡:</span>
          <span class="info-value" id="videoResolution">åŠ è½½ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ’­æ”¾çŠ¶æ€:</span>
          <span class="info-value" id="playStatus">å·²æš‚åœ</span>
        </div>
        <div class="info-item">
          <span class="info-label">å½“å‰éŸ³é‡:</span>
          <span class="info-value" id="currentVolume">100%</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ’­æ”¾é€Ÿåº¦:</span>
          <span class="info-value" id="currentSpeed">1.0x</span>
        </div>
      </div>

      <!-- å¿«æ·é”®è¯´æ˜ -->
      <div class="keyboard-shortcuts">
        <h4>âŒ¨ï¸ å¿«æ·é”®æ“ä½œ</h4>
        <div class="shortcuts-grid">
          <div class="shortcut-item">
            <span>æ’­æ”¾/æš‚åœ</span>
            <span class="shortcut-key">ç©ºæ ¼</span>
          </div>
          <div class="shortcut-item">
            <span>å¿«è¿›10ç§’</span>
            <span class="shortcut-key">â†’</span>
          </div>
          <div class="shortcut-item">
            <span>åé€€10ç§’</span>
            <span class="shortcut-key">â†</span>
          </div>
          <div class="shortcut-item">
            <span>éŸ³é‡å¢åŠ </span>
            <span class="shortcut-key">â†‘</span>
          </div>
          <div class="shortcut-item">
            <span>éŸ³é‡å‡å°‘</span>
            <span class="shortcut-key">â†“</span>
          </div>
          <div class="shortcut-item">
            <span>é™éŸ³/å–æ¶ˆé™éŸ³</span>
            <span class="shortcut-key">M</span>
          </div>
          <div class="shortcut-item">
            <span>å…¨å±åˆ‡æ¢</span>
            <span class="shortcut-key">F</span>
          </div>
          <div class="shortcut-item">
            <span>è·³è½¬åˆ°å¼€å§‹</span>
            <span class="shortcut-key">Home</span>
          </div>
          <div class="shortcut-item">
            <span>è·³è½¬åˆ°ç»“å°¾</span>
            <span class="shortcut-key">End</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- é€šçŸ¥ç»„ä»¶ -->
  <div class="notification" id="notification"></div>

  <script>
    // è§†é¢‘æ’­æ”¾å™¨ç±» - é¢å‘å¯¹è±¡è®¾è®¡
    class VideoPlayer {
      constructor(videoId) {
        this.video = document.getElementById(videoId);
        this.isInitialized = false;
        this.lastVolumeBeforeMute = 1;
        this.init();
      }

      // åˆå§‹åŒ–æ’­æ”¾å™¨
      init() {
        if (!this.video) {
          this.showNotification('è§†é¢‘å…ƒç´ æœªæ‰¾åˆ°', 'error');
          return;
        }

        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        this.bindEvents();

        // è®¾ç½®åˆå§‹çŠ¶æ€
        this.updateUI();

        this.isInitialized = true;
        this.showNotification('è§†é¢‘æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆ', 'success');
      }

      // ç»‘å®šæ‰€æœ‰äº‹ä»¶
      bindEvents() {
        // è§†é¢‘äº‹ä»¶
        this.video.addEventListener('loadedmetadata', () => this.onLoadedMetadata());
        this.video.addEventListener('timeupdate', () => this.onTimeUpdate());
        this.video.addEventListener('play', () => this.onPlay());
        this.video.addEventListener('pause', () => this.onPause());
        this.video.addEventListener('ended', () => this.onEnded());
        this.video.addEventListener('volumechange', () => this.onVolumeChange());
        this.video.addEventListener('ratechange', () => this.onRateChange());
        this.video.addEventListener('error', (e) => this.onError(e));

        // è¿›åº¦æ¡ç‚¹å‡»äº‹ä»¶
        const progressBar = document.getElementById('progressBar');
        progressBar.addEventListener('click', (e) => this.onProgressBarClick(e));

        // é”®ç›˜äº‹ä»¶
        document.addEventListener('keydown', (e) => this.onKeyDown(e));

        // è§†é¢‘è¦†ç›–å±‚ç‚¹å‡»äº‹ä»¶
        const videoOverlay = document.getElementById('videoOverlay');
        videoOverlay.addEventListener('click', () => this.togglePlay());

        // è§†é¢‘ç‚¹å‡»äº‹ä»¶
        this.video.addEventListener('click', () => this.togglePlay());
      }

      // è§†é¢‘å…ƒæ•°æ®åŠ è½½å®Œæˆ
      onLoadedMetadata() {
        const duration = this.formatTime(this.video.duration);
        document.getElementById('duration').textContent = duration;
        document.getElementById('videoDuration').textContent = duration;

        // è·å–è§†é¢‘åˆ†è¾¨ç‡
        const resolution = `${this.video.videoWidth} Ã— ${this.video.videoHeight}`;
        document.getElementById('videoResolution').textContent = resolution;

        this.updateUI();
      }

      // æ—¶é—´æ›´æ–°
      onTimeUpdate() {
        const currentTime = this.video.currentTime;
        const duration = this.video.duration;
        const progress = (currentTime / duration) * 100;

        document.getElementById('currentTime').textContent = this.formatTime(currentTime);
        document.getElementById('progressFill').style.width = progress + '%';
      }

      // æ’­æ”¾å¼€å§‹
      onPlay() {
        document.getElementById('playPauseText').textContent = 'æš‚åœ';
        document.getElementById('playStatus').textContent = 'æ­£åœ¨æ’­æ”¾';
        document.getElementById('playButton').textContent = 'â¸';
        document.getElementById('videoOverlay').classList.remove('show');
      }

      // æ’­æ”¾æš‚åœ
      onPause() {
        document.getElementById('playPauseText').textContent = 'æ’­æ”¾';
        document.getElementById('playStatus').textContent = 'å·²æš‚åœ';
        document.getElementById('playButton').textContent = 'â–¶';

        // æ˜¾ç¤ºè¦†ç›–å±‚ï¼ˆå»¶è¿Ÿæ˜¾ç¤ºé¿å…è¯¯è§¦ï¼‰
        setTimeout(() => {
          if (this.video.paused) {
            document.getElementById('videoOverlay').classList.add('show');
          }
        }, 1000);
      }

      // æ’­æ”¾ç»“æŸ
      onEnded() {
        document.getElementById('playStatus').textContent = 'æ’­æ”¾å®Œæ¯•';
        document.getElementById('videoOverlay').classList.add('show');
        this.showNotification('è§†é¢‘æ’­æ”¾å®Œæ¯•', 'success');
      }

      // éŸ³é‡å˜åŒ–
      onVolumeChange() {
        const volume = Math.round(this.video.volume * 100);
        document.getElementById('volumeValue').textContent = volume + '%';
        document.getElementById('currentVolume').textContent = volume + '%';
        document.getElementById('volumeSlider').value = this.video.volume;

        const muteText = document.getElementById('muteText');
        muteText.textContent = this.video.muted ? 'ğŸ”Š å–æ¶ˆé™éŸ³' : 'ğŸ”‡ é™éŸ³';
      }

      // æ’­æ”¾é€Ÿåº¦å˜åŒ–
      onRateChange() {
        const rate = this.video.playbackRate.toFixed(2);
        document.getElementById('speedValue').textContent = rate + 'x';
        document.getElementById('currentSpeed').textContent = rate + 'x';
        document.getElementById('speedSlider').value = this.video.playbackRate;
      }

      // é”™è¯¯å¤„ç†
      onError(e) {
        console.error('è§†é¢‘æ’­æ”¾é”™è¯¯:', e);
        this.showNotification('è§†é¢‘åŠ è½½æˆ–æ’­æ”¾å‡ºé”™', 'error');
      }

      // è¿›åº¦æ¡ç‚¹å‡»
      onProgressBarClick(e) {
        if (!this.video.duration) return;

        const rect = e.currentTarget.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        const newTime = percent * this.video.duration;

        this.video.currentTime = newTime;
        this.showNotification(`è·³è½¬åˆ° ${this.formatTime(newTime)}`, 'success');
      }

      // é”®ç›˜å¿«æ·é”®
      onKeyDown(e) {
        // å¦‚æœç„¦ç‚¹åœ¨è¾“å…¥æ¡†ä¸­ï¼Œä¸å¤„ç†å¿«æ·é”®
        if (e.target.tagName === 'INPUT') return;

        switch (e.code) {
          case 'Space':
            e.preventDefault();
            this.togglePlay();
            break;
          case 'ArrowLeft':
            e.preventDefault();
            this.seekVideo(-10);
            break;
          case 'ArrowRight':
            e.preventDefault();
            this.seekVideo(10);
            break;
          case 'ArrowUp':
            e.preventDefault();
            this.adjustVolume(0.1);
            break;
          case 'ArrowDown':
            e.preventDefault();
            this.adjustVolume(-0.1);
            break;
          case 'KeyM':
            e.preventDefault();
            this.toggleMute();
            break;
          case 'KeyF':
            e.preventDefault();
            this.toggleFullscreen();
            break;
          case 'Home':
            e.preventDefault();
            this.video.currentTime = 0;
            break;
          case 'End':
            e.preventDefault();
            this.video.currentTime = this.video.duration;
            break;
          case 'Digit1':
          case 'Digit2':
          case 'Digit3':
          case 'Digit4':
          case 'Digit5':
          case 'Digit6':
          case 'Digit7':
          case 'Digit8':
          case 'Digit9':
            e.preventDefault();
            const percent = parseInt(e.code.slice(-1)) / 10;
            this.video.currentTime = this.video.duration * percent;
            break;
        }
      }

      // æ’­æ”¾/æš‚åœåˆ‡æ¢
      togglePlay() {
        if (!this.isInitialized) return;

        if (this.video.paused) {
          const playPromise = this.video.play();
          if (playPromise !== undefined) {
            playPromise.catch(error => {
              console.error('æ’­æ”¾å¤±è´¥:', error);
              this.showNotification('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥è§†é¢‘æ–‡ä»¶', 'error');
            });
          }
        } else {
          this.video.pause();
        }
      }

      // åœæ­¢æ’­æ”¾
      stopVideo() {
        this.video.pause();
        this.video.currentTime = 0;
        this.showNotification('å·²åœæ­¢æ’­æ”¾', 'success');
      }

      // é‡æ–°æ’­æ”¾
      replayVideo() {
        this.video.currentTime = 0;
        this.video.play();
        this.showNotification('é‡æ–°æ’­æ”¾', 'success');
      }

      // è·³è½¬
      seekVideo(seconds) {
        const newTime = Math.max(0, Math.min(this.video.duration, this.video.currentTime + seconds));
        this.video.currentTime = newTime;

        const direction = seconds > 0 ? 'å¿«è¿›' : 'åé€€';
        this.showNotification(`${direction} ${Math.abs(seconds)} ç§’`, 'success');
      }

      // è®¾ç½®æ’­æ”¾é€Ÿåº¦
      setPlaybackRate(rate) {
        this.video.playbackRate = parseFloat(rate);
        this.showNotification(`æ’­æ”¾é€Ÿåº¦è®¾ç½®ä¸º ${rate}x`, 'success');
      }

      // è°ƒæ•´éŸ³é‡
      adjustVolume(change) {
        const newVolume = Math.max(0, Math.min(1, this.video.volume + change));
        this.video.volume = newVolume;

        if (this.video.muted && newVolume > 0) {
          this.video.muted = false;
        }
      }

      // è®¾ç½®éŸ³é‡
      setVolume(volume) {
        this.video.volume = parseFloat(volume);
        if (this.video.muted && volume > 0) {
          this.video.muted = false;
        }
      }

      // é™éŸ³åˆ‡æ¢
      toggleMute() {
        if (this.video.muted) {
          this.video.muted = false;
          this.video.volume = this.lastVolumeBeforeMute;
        } else {
          this.lastVolumeBeforeMute = this.video.volume;
          this.video.muted = true;
        }
      }

      // å…¨å±åˆ‡æ¢
      toggleFullscreen() {
        if (!document.fullscreenElement) {
          if (this.video.requestFullscreen) {
            this.video.requestFullscreen();
          } else if (this.video.webkitRequestFullscreen) {
            this.video.webkitRequestFullscreen();
          } else if (this.video.msRequestFullscreen) {
            this.video.msRequestFullscreen();
          }
          this.showNotification('è¿›å…¥å…¨å±æ¨¡å¼', 'success');
        } else {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
          this.showNotification('é€€å‡ºå…¨å±æ¨¡å¼', 'success');
        }
      }

      // ç”»ä¸­ç”»æ¨¡å¼
      requestPictureInPicture() {
        if ('pictureInPictureEnabled' in document) {
          if (document.pictureInPictureElement) {
            document.exitPictureInPicture();
          } else {
            this.video.requestPictureInPicture().catch(error => {
              console.error('ç”»ä¸­ç”»æ¨¡å¼å¤±è´¥:', error);
              this.showNotification('æµè§ˆå™¨ä¸æ”¯æŒç”»ä¸­ç”»æ¨¡å¼', 'error');
            });
          }
        } else {
          this.showNotification('æµè§ˆå™¨ä¸æ”¯æŒç”»ä¸­ç”»æ¨¡å¼', 'error');
        }
      }

      // å±å¹•æ—‹è½¬
      rotateScreen(orientation) {
        if (screen.orientation && screen.orientation.lock) {
          screen.orientation.lock(orientation).then(() => {
            this.showNotification(`å±å¹•å·²åˆ‡æ¢åˆ°${orientation === 'landscape' ? 'æ¨ªå±' : 'ç«–å±'}æ¨¡å¼`, 'success');
            if (orientation === 'landscape') {
              this.toggleFullscreen();
            }
          }).catch(error => {
            console.error('å±å¹•æ—‹è½¬å¤±è´¥:', error);
            this.showNotification('å±å¹•æ—‹è½¬å¤±è´¥', 'error');
          });
        } else {
          this.showNotification('è®¾å¤‡ä¸æ”¯æŒå±å¹•æ—‹è½¬æ§åˆ¶', 'error');
        }
      }

      // æ ¼å¼åŒ–æ—¶é—´
      formatTime(seconds) {
        if (isNaN(seconds)) return '00:00';

        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const secs = Math.floor(seconds % 60);

        if (hours > 0) {
          return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        } else {
          return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
      }

      // æ›´æ–°UI
      updateUI() {
        this.onVolumeChange();
        this.onRateChange();
      }

      // æ˜¾ç¤ºé€šçŸ¥
      showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.className = `notification ${type} show`;

        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }
    }

    // å…¨å±€å˜é‡å’Œå‡½æ•°ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
    let videoPlayer;

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function () {
      videoPlayer = new VideoPlayer('videoPlayer');
    });

    // å…¨å±€å‡½æ•°ï¼ˆå‘åå…¼å®¹æ—§çš„è°ƒç”¨æ–¹å¼ï¼‰
    function togglePlay() { videoPlayer?.togglePlay(); }
    function stopVideo() { videoPlayer?.stopVideo(); }
    function replayVideo() { videoPlayer?.replayVideo(); }
    function seekVideo(seconds) { videoPlayer?.seekVideo(seconds); }
    function setPlaybackRate(rate) { videoPlayer?.setPlaybackRate(rate); }
    function adjustVolume(change) { videoPlayer?.adjustVolume(change); }
    function setVolume(volume) { videoPlayer?.setVolume(volume); }
    function toggleMute() { videoPlayer?.toggleMute(); }
    function toggleFullscreen() { videoPlayer?.toggleFullscreen(); }
    function requestPictureInPicture() { videoPlayer?.requestPictureInPicture(); }
    function rotateScreen(orientation) { videoPlayer?.rotateScreen(orientation); }

    // å…¼å®¹æ—§å‡½æ•°å
    function play() { togglePlay(); }
    function stop() { stopVideo(); }
    function quickly() { seekVideo(10); }
    function back() { seekVideo(-10); }
    function kuasu() { setPlaybackRate(2); }
    function mansu() { setPlaybackRate(0.5); }
    function zhengchang() { setPlaybackRate(1); }
    function jiada() { adjustVolume(0.2); }
    function jianxiao() { adjustVolume(-0.2); }
    function jingyin() { toggleMute(); }
    function quanping() { toggleFullscreen(); }
    function hengping() { rotateScreen('landscape'); }
  </script>
</body>

</html>